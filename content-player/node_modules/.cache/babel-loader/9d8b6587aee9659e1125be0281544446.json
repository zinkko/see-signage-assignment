{"ast":null,"code":"var _jsxFileName = \"/home/zno/projects/see-signage-assignment/content-player/src/ContentPlayer.tsx\";\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst INTERVAL = 7000;\nexport class ContentPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.timerId = undefined;\n    this.state = {\n      loading: true,\n      playlist: [],\n      index: 0\n    };\n  }\n\n  nextIndex() {\n    const newIndex = (this.state.index + 1) % this.state.playlist.length;\n    this.setState({\n      index: newIndex\n    });\n  }\n\n  async fetchPlaylist() {\n    const urlParts = window.location.href.split('/');\n    const name = urlParts[urlParts.length - 1];\n    const response = await fetch(`http://localhost:8080/playlist/${name}`);\n    const playlist = await response.json();\n    this.setState({\n      loading: false,\n      playlist\n    });\n  }\n\n  componentDidMount() {\n    this.timerId = setInterval(this.nextIndex.bind(this), INTERVAL);\n    this.fetchPlaylist();\n  }\n\n  componentWillUnmount() {\n    if (this.timerId) {\n      clearInterval(this.timerId);\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return 'Loading...';\n    }\n\n    const source = this.state.playlist[this.state.index];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-player-container\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"content-image\",\n        src: source\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 16\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","INTERVAL","ContentPlayer","Component","constructor","props","timerId","undefined","state","loading","playlist","index","nextIndex","newIndex","length","setState","fetchPlaylist","urlParts","window","location","href","split","name","response","fetch","json","componentDidMount","setInterval","bind","componentWillUnmount","clearInterval","render","source"],"sources":["/home/zno/projects/see-signage-assignment/content-player/src/ContentPlayer.tsx"],"sourcesContent":["import React from \"react\";\n\nconst INTERVAL = 7000;\ninterface ContentPlayerState {\n    loading: boolean;\n    playlist: string[];\n    index: number;\n}\n\nexport class ContentPlayer extends React.Component<{}, ContentPlayerState> {\n    private timerId?: NodeJS.Timer = undefined;\n\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            loading: true,\n            playlist: [],\n            index: 0,\n        }\n    }\n\n    nextIndex() {\n        const newIndex = (this.state.index + 1) % this.state.playlist.length;\n        this.setState({\n            index: newIndex,\n        })\n    }\n\n    async fetchPlaylist() {\n        const urlParts = window.location.href.split('/');\n        const name = urlParts[urlParts.length-1];\n        const response = await fetch(`http://localhost:8080/playlist/${name}`);\n        const playlist = await response.json();\n        this.setState({\n            loading: false,\n            playlist,\n        });\n    }\n    \n    componentDidMount(): void {\n        this.timerId = setInterval(this.nextIndex.bind(this), INTERVAL);\n        this.fetchPlaylist();\n    }\n    \n    componentWillUnmount(): void {\n        if (this.timerId) {\n            clearInterval(this.timerId);\n        }\n    }\n\n    render () {\n        if (this.state.loading) {\n            return 'Loading...';\n        }\n\n        const source = this.state.playlist[this.state.index];\n        return <div className='content-player-container'>\n            <img className='content-image' src={source}></img>\n        </div>\n    }\n}"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAG,IAAjB;AAOA,OAAO,MAAMC,aAAN,SAA4BF,KAAK,CAACG,SAAlC,CAAoE;EAGvEC,WAAW,CAACC,KAAD,EAAY;IACnB,MAAMA,KAAN;IADmB,KAFfC,OAEe,GAFUC,SAEV;IAEnB,KAAKC,KAAL,GAAa;MACTC,OAAO,EAAE,IADA;MAETC,QAAQ,EAAE,EAFD;MAGTC,KAAK,EAAE;IAHE,CAAb;EAKH;;EAEDC,SAAS,GAAG;IACR,MAAMC,QAAQ,GAAG,CAAC,KAAKL,KAAL,CAAWG,KAAX,GAAmB,CAApB,IAAyB,KAAKH,KAAL,CAAWE,QAAX,CAAoBI,MAA9D;IACA,KAAKC,QAAL,CAAc;MACVJ,KAAK,EAAEE;IADG,CAAd;EAGH;;EAEkB,MAAbG,aAAa,GAAG;IAClB,MAAMC,QAAQ,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,CAAjB;IACA,MAAMC,IAAI,GAAGL,QAAQ,CAACA,QAAQ,CAACH,MAAT,GAAgB,CAAjB,CAArB;IACA,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAAE,kCAAiCF,IAAK,EAAxC,CAA5B;IACA,MAAMZ,QAAQ,GAAG,MAAMa,QAAQ,CAACE,IAAT,EAAvB;IACA,KAAKV,QAAL,CAAc;MACVN,OAAO,EAAE,KADC;MAEVC;IAFU,CAAd;EAIH;;EAEDgB,iBAAiB,GAAS;IACtB,KAAKpB,OAAL,GAAeqB,WAAW,CAAC,KAAKf,SAAL,CAAegB,IAAf,CAAoB,IAApB,CAAD,EAA4B3B,QAA5B,CAA1B;IACA,KAAKe,aAAL;EACH;;EAEDa,oBAAoB,GAAS;IACzB,IAAI,KAAKvB,OAAT,EAAkB;MACdwB,aAAa,CAAC,KAAKxB,OAAN,CAAb;IACH;EACJ;;EAEDyB,MAAM,GAAI;IACN,IAAI,KAAKvB,KAAL,CAAWC,OAAf,EAAwB;MACpB,OAAO,YAAP;IACH;;IAED,MAAMuB,MAAM,GAAG,KAAKxB,KAAL,CAAWE,QAAX,CAAoB,KAAKF,KAAL,CAAWG,KAA/B,CAAf;IACA,oBAAO;MAAK,SAAS,EAAC,0BAAf;MAAA,uBACH;QAAK,SAAS,EAAC,eAAf;QAA+B,GAAG,EAAEqB;MAApC;QAAA;QAAA;QAAA;MAAA;IADG;MAAA;MAAA;MAAA;IAAA,QAAP;EAGH;;AAlDsE"},"metadata":{},"sourceType":"module"}