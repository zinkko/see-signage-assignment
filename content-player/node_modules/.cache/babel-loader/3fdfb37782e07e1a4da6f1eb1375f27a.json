{"ast":null,"code":"var _jsxFileName = \"/home/zno/projects/see-signage-assignment/content-player/src/ContentPlayer.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst testData = ['https://imgs.xkcd.com/comics/easy_or_hard.png', 'https://imgs.xkcd.com/comics/archimedes_principle.png', 'https://imgs.xkcd.com/comics/movie_ages.png'];\nconst DELAY = 1000; // dev, prd 7000\n\nexport const ContentPlayer = () => {\n  _s();\n\n  const [playlist, setPlaylist] = useState(testData);\n  const [index, setIndex] = useState(0);\n  const [timeoutId, setTimeoutId] = useState(null); // todo useCallback\n\n  const next = () => {\n    const i = index;\n    const m = playlist.length;\n    console.log('index=', i);\n    setIndex((i + 1) % m);\n    const id = setTimeout(next, DELAY);\n    setTimeoutId(id);\n  }; // startLoop\n\n\n  useEffect(() => {\n    console.log('start effect');\n    next();\n    return function cleanup() {\n      console.log('clean up');\n\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content-player-container\",\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"content-image\",\n      src: playlist[index]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 12\n  }, this);\n};\n\n_s(ContentPlayer, \"lgUgOe4+ceBnfl3qEKbZda+4DMM=\");\n\n_c = ContentPlayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContentPlayer\");","map":{"version":3,"names":["useEffect","useState","testData","DELAY","ContentPlayer","playlist","setPlaylist","index","setIndex","timeoutId","setTimeoutId","next","i","m","length","console","log","id","setTimeout","cleanup","clearTimeout"],"sources":["/home/zno/projects/see-signage-assignment/content-player/src/ContentPlayer.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\"\n\nconst testData = [\n    'https://imgs.xkcd.com/comics/easy_or_hard.png',\n    'https://imgs.xkcd.com/comics/archimedes_principle.png',\n    'https://imgs.xkcd.com/comics/movie_ages.png',\n]\n\nconst DELAY = 1000; // dev, prd 7000\n\n\nexport const ContentPlayer = () => {\n    const [playlist, setPlaylist] = useState<string[]>(testData);\n    const [index, setIndex] = useState<number>(0);\n    const [timeoutId, setTimeoutId] = useState<NodeJS.Timeout | null>(null);\n\n    // todo useCallback\n    const next = () => {\n        const i = index;\n        const m = playlist.length;\n        console.log('index=', i);\n        setIndex((i + 1) % m);\n        const id = setTimeout(next, DELAY);\n        setTimeoutId(id);\n    }\n\n    // startLoop\n    useEffect(() => {\n        console.log('start effect');\n        next();\n        return function cleanup () {\n            console.log('clean up');\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n        }\n    }, []);\n\n    return <div className='content-player-container'>\n        <img className='content-image' src={playlist[index]}></img>\n    </div>\n}"],"mappings":";;;AAAA,SAAsBA,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;;AAEA,MAAMC,QAAQ,GAAG,CACb,+CADa,EAEb,uDAFa,EAGb,6CAHa,CAAjB;AAMA,MAAMC,KAAK,GAAG,IAAd,C,CAAoB;;AAGpB,OAAO,MAAMC,aAAa,GAAG,MAAM;EAAA;;EAC/B,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAWC,QAAX,CAAxC;EACA,MAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAS,CAAT,CAAlC;EACA,MAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAwB,IAAxB,CAA1C,CAH+B,CAK/B;;EACA,MAAMU,IAAI,GAAG,MAAM;IACf,MAAMC,CAAC,GAAGL,KAAV;IACA,MAAMM,CAAC,GAAGR,QAAQ,CAACS,MAAnB;IACAC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBJ,CAAtB;IACAJ,QAAQ,CAAC,CAACI,CAAC,GAAG,CAAL,IAAUC,CAAX,CAAR;IACA,MAAMI,EAAE,GAAGC,UAAU,CAACP,IAAD,EAAOR,KAAP,CAArB;IACAO,YAAY,CAACO,EAAD,CAAZ;EACH,CAPD,CAN+B,CAe/B;;;EACAjB,SAAS,CAAC,MAAM;IACZe,OAAO,CAACC,GAAR,CAAY,cAAZ;IACAL,IAAI;IACJ,OAAO,SAASQ,OAAT,GAAoB;MACvBJ,OAAO,CAACC,GAAR,CAAY,UAAZ;;MACA,IAAIP,SAAJ,EAAe;QACXW,YAAY,CAACX,SAAD,CAAZ;MACH;IACJ,CALD;EAMH,CATQ,EASN,EATM,CAAT;EAWA,oBAAO;IAAK,SAAS,EAAC,0BAAf;IAAA,uBACH;MAAK,SAAS,EAAC,eAAf;MAA+B,GAAG,EAAEJ,QAAQ,CAACE,KAAD;IAA5C;MAAA;MAAA;MAAA;IAAA;EADG;IAAA;IAAA;IAAA;EAAA,QAAP;AAGH,CA9BM;;GAAMH,a;;KAAAA,a"},"metadata":{},"sourceType":"module"}